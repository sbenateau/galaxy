<tool id="join-data.table" name="Join two datasets">
    <description>on a specified field</description>
    <requirements>
        <requirement type="package" version="1.12.2">r-data.table</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        Rscript '$__tool_directory__/join-data.table.R' '$input1' '$input2' '$joinType' '$key1' '$key2' '$keepCol1' '$keepCol2' '$keepHeaders'
        '$output'
        ]]>
    </command>
    <inputs>
        <param format="tabular,csv" name="input1" type="data" label="Join dataset 1" help="csv or tabular" />
        <param name="key1" label="using column" type="data_column" data_ref="input1" />
        <param name="keepCol1" label="Column to keep from dataset 1" type="data_column" data_ref="input1" multiple="True"/>
        <param format="tabular,csv" name="input2" type="data" label="and dataset 2" help="csv or tabular" />
        <param name="key2" label="using column" type="data_column" data_ref="input2" />
        <param name="keepCol2" label="Column to keep from dataset 2" type="data_column" data_ref="input2" multiple="True"/>
        <param name="joinType" type="select" label="How to join the documents" >
            <option value="INNER">Include only the lines matching in both files (default)</option>
            <option value="LEFT">Include all the lines from dataset 1 and only the matching lines in dataset 2</option>
            <option value="RIGHT">Include only the matching lines in dataset 1 and all the lines from dataset 2</option>
            <option value="FULL">Include all lines from both files (can result in very big files)</option>
        </param>
        <param name="keepHeaders" truevalue="TRUE" falsevalue="FALSE" label="Keep header in the output" help="if the input file has no header, variable names will be created with the following format 'V1' " type="boolean" />
    </inputs>
    <outputs>
        <data format="tabular" name="output" from_work_dir="output-join.tabular" />
    </outputs>
    <tests>
        <test>
            <param name="input1" value="input1-join.tabular"/>
            <param name="input2" value="input2-join.tabular"/>
            <param name="key1" value="1"/>
            <param name="key2" value="2"/>
            <param name="keepCol1" value="1,2,3"/>
            <param name="keepCol2" value="1,2"/>
            <param name="joinType" value="INNER"/>
            <param name="keepHeaders" value="TRUE"/>
            <output name="output" file="output-join.tabular"/>
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

This tool



    ]]></help>
</tool>
